(()=>{"use strict";var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{_:()=>l});const e={projects:[],addProject:function(t){0!=this.projects.length?this.projects.push({pid:this.projects[this.projects.length-1].pid+1,title:t,tasks:[],addTask:function(t,e="",s=0,n=""){0!=this.tasks.length?this.tasks.push({id:this.tasks[this.tasks.length-1].id+1,title:t,description:n,dueDate:e,priority:s}):this.tasks.push({id:this.tasks.length,title:t,description:n,dueDate:e,priority:s})},removeTask:function(t){const e=this.tasks.findIndex((e=>e.id==t));this.tasks.splice(e,1)}}):this.projects.push({pid:this.projects.length,title:t,tasks:[],addTask:function(t,e="",s=0,n=""){0!=this.tasks.length?this.tasks.push({id:this.tasks[this.tasks.length-1].id+1,title:t,description:n,dueDate:e,priority:s}):this.tasks.push({id:this.tasks.length,title:t,description:n,dueDate:e,priority:s})},removeTask:function(t){const e=this.tasks.findIndex((e=>e.id==t));this.tasks.splice(e,1)}})},removeProject:function(t){const e=this.projects.findIndex((e=>e.pid==t));this.projects.splice(e,1)},findProject:function(t){return this.projects.findIndex((e=>e.pid==t))}};function s(t,e){"project"===t?document.querySelector(`[data-idp="${e}"]`).remove():document.querySelector(`[data-idt="${e}"]`).remove()}function n(t,e){const s=document.getElementById("plist"),n=document.createElement("li");n.classList.add("projectbox"),n.setAttribute("data-idp",e);const i=document.createElement("span");i.setAttribute("data-idp",e),i.innerText=t,n.appendChild(i);const a=document.createElement("button"),d=document.createElement("img");return d.classList.add("ximg"),d.setAttribute("alt","delete"),d.setAttribute("src","./images/X.svg"),d.setAttribute("data-idp",e),a.appendChild(d),n.appendChild(a),s.appendChild(n),[a,n]}function i(t,e,s,n,i){const a=document.getElementById("tlist"),d=document.createElement("li"),c=document.createElement("div");d.setAttribute("data-idt",i),d.classList.add("taskbox"),c.classList.add("options");const o=document.createElement("span");o.classList.add("task"),o.innerText=`Title: ${t}`,c.appendChild(o);const r=document.createElement("span");r.classList.add("task"),r.innerText=`Due: ${e}`,c.appendChild(r);const l=document.createElement("span");l.classList.add("task"),l.innerText=`Priority: ${s}`,c.appendChild(l);const p=document.createElement("p");p.classList.add("taskd"),p.innerText=n,c.appendChild(p),d.appendChild(c);const u=document.createElement("button");return u.classList.add("delete"),u.innerText="Delete",u.setAttribute("data-idt",i),d.appendChild(u),a.appendChild(d),u}function a(){document.getElementById("tlist").innerHTML=""}(function(){let t=document.getElementById("modal"),e=document.getElementById("taskBtn"),s=document.getElementsByClassName("close")[0];e.addEventListener("click",(()=>{t.style.display="block"})),s.addEventListener("click",(()=>{t.style.display="none"})),window.addEventListener("click",(e=>{e.target==t&&(t.style.display="none")}))})(),localStorage.length<1||"[]"==localStorage.getItem("list")?r("Main"):(JSON.parse(localStorage.getItem("list")).forEach((t=>{r(t.title),t.tasks.forEach((t=>{e.projects[e.projects.length-1].addTask(t.title,t.dueDate,t.priority,t.description)}))})),u(0));let d=0;function c(t){t.addEventListener("click",(t=>{var n;n=t,e.removeProject(n.srcElement.dataset.idp),s("project",n.srcElement.dataset.idp),d==n.srcElement.dataset.idp&&a(),localStorage.setItem("list",JSON.stringify(e.projects))}))}function o(t){t.addEventListener("click",(t=>l(t)))}function r(t){if(0!=e.projects.length&&e.projects[e.projects.length-1].pid>=e.projects.length){const s=n(t,e.projects[e.projects.length-1].pid+1);c(s[0]),p(s[1])}else{const s=n(t,e.projects.length);c(s[0]),p(s[1])}e.addProject(t),localStorage.setItem("list",JSON.stringify(e.projects))}function l(t){const n=e.findProject(d);e.projects[n].removeTask(t.srcElement.dataset.idt),s("task",t.srcElement.dataset.idt),localStorage.setItem("list",JSON.stringify(e.projects))}function p(t){t.addEventListener("click",(t=>{if("ximg"!=t.target.className){const e=t.target.attributes[t.target.attributes.length-1].value;d=e,u(e)}}))}function u(t){let s;for(let n=0;n<e.projects.length;n++)if(e.projects[n].pid==t){s=e.projects[n];break}!function(t){a();let e=0;for(;e<t.tasks.length&&0!=t.tasks.length;)i(t.tasks[e].title,t.tasks[e].dueDate,t.tasks[e].priority,t.tasks[e].description,t.tasks[e].id).addEventListener("click",(t=>l(t))),e++}(s),localStorage.setItem("list",JSON.stringify(e.projects))}document.getElementById("projectForm").addEventListener("submit",(t=>{t.preventDefault(),r(t.target.elements[0].value)})),document.getElementById("taskForm").addEventListener("submit",(t=>{t.preventDefault();const s=t.target.elements[0].value,n=t.target.elements[1].value,a=t.target.elements[2].value,c=t.target.elements[3].value;0!=e.projects.length&&function(t,s,n,a){const c=e.findProject(d);0!=e.projects[c].tasks.length&&e.projects[c].tasks[e.projects[c].tasks.length-1].id>=e.projects[c].tasks.length?o(i(t,s,n,a,e.projects[c].tasks[e.projects[c].tasks.length-1].id+1)):o(i(t,s,n,a,e.projects[c].tasks.length)),e.projects[c].addTask(t,s,n,a),localStorage.setItem("list",JSON.stringify(e.projects))}(s,n,a,c),document.getElementById("modal").style.display="none"}))})();