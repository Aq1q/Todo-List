(()=>{"use strict";const t={projects:[],addProject:function(t){0!=this.projects.length?(console.log(this.projects[this.projects.length-1].pid),this.projects.push({pid:this.projects[this.projects.length-1].pid+1,title:t,tasks:[],addTask:function(t,e="",s=0,n=""){0!=this.tasks.length?this.tasks.push({id:this.tasks[this.tasks.length-1].id+1,title:t,description:n,dueDate:e,priority:s}):this.tasks.push({id:this.tasks.length,title:t,description:n,dueDate:e,priority:s})},removeTask:function(t){const e=this.tasks.findIndex((e=>e.id==t));this.tasks.splice(e,1)}})):this.projects.push({pid:this.projects.length,title:t,tasks:[],addTask:function(t,e="",s=0,n=""){0!=this.tasks.length?this.tasks.push({id:this.tasks[this.tasks.length-1].id+1,title:t,description:n,dueDate:e,priority:s}):this.tasks.push({id:this.tasks.length,title:t,description:n,dueDate:e,priority:s})},removeTask:function(t){const e=this.tasks.findIndex((e=>e.id==t));this.tasks.splice(e,1)}})},removeProject:function(t){const e=this.projects.findIndex((e=>e.pid==t));this.projects.splice(e,1)}};function e(t,e){"project"===t?(console.log(e),document.querySelector(`[data-idp="${e}"]`).remove()):document.querySelector(`[data-idt="${e}"]`).remove()}function s(t,e){const s=document.getElementById("plist"),n=document.createElement("li");n.classList.add("projectbox"),n.setAttribute("data-idp",e);const i=document.createElement("span");i.innerText=t,n.appendChild(i);const d=document.createElement("button"),a=document.createElement("img");return a.classList.add("ximg"),a.setAttribute("alt","delete"),a.setAttribute("src","./images/X.svg"),a.setAttribute("data-idp",e),d.appendChild(a),n.appendChild(d),s.appendChild(n),d}function n(t,e){const s=document.getElementById("tlist"),n=document.createElement("li"),i=document.createElement("div");n.setAttribute("data-idt",e),n.classList.add("taskbox"),i.classList.add("options");const d=document.createElement("span");d.classList.add("task"),d.innerText=`Title: ${t[0].value}`,i.appendChild(d);const a=document.createElement("span");a.classList.add("task"),a.innerText=`Due: ${t[1].value}`,i.appendChild(a);const c=document.createElement("span");c.classList.add("task"),c.innerText=`Priority: ${t[2].value}`,i.appendChild(c);const o=document.createElement("p");o.classList.add("taskd"),o.innerText=t[3].value,i.appendChild(o),n.appendChild(i);const l=document.createElement("button");return l.classList.add("delete"),l.innerText="Delete",l.setAttribute("data-idt",e),n.appendChild(l),s.appendChild(n),l}function i(s){s.addEventListener("click",(s=>{return n=s,console.log(n),t.removeProject(n.srcElement.dataset.idp),void e("project",n.srcElement.dataset.idp);var n}))}function d(s){s.addEventListener("click",(s=>function(s,n=0){console.log(t.projects[n].tasks),t.projects[n].removeTask(s.srcElement.dataset.idt),e("task",s.srcElement.dataset.idt)}(s)))}function a(e){0!=t.projects.length&&t.projects[t.projects.length-1].pid>=t.projects.length?i(s(e,t.projects[t.projects.length-1].pid+1)):i(s(e,t.projects.length)),t.addProject(e)}!function(){let t=document.getElementById("modal"),e=document.getElementById("taskBtn"),s=document.getElementsByClassName("close")[0],n=document.getElementById("taskAdd");e.addEventListener("click",(()=>{t.style.display="block"})),s.addEventListener("click",(()=>{t.style.display="none"})),n.addEventListener("click",(()=>{t.style.display="none"})),window.addEventListener("click",(e=>{e.target==t&&(t.style.display="none")}))}(),localStorage.length<1&&a("Main"),document.getElementById("projectForm").addEventListener("submit",(t=>{t.preventDefault(),a(t.target.elements[0].value)})),document.getElementById("taskForm").addEventListener("submit",(e=>{e.preventDefault(),function(e){0!=t.projects[0].tasks.length&&t.projects[0].tasks[t.projects[0].tasks.length-1].id>=t.projects[0].tasks.length?d(n(e,t.projects[0].tasks[t.projects[0].tasks.length-1].id+1)):d(n(e,t.projects[0].tasks.length)),t.projects[0].addTask(e[0].value,e[1].value,e[2].value,e[3].value)}(e.target.elements)}))})();